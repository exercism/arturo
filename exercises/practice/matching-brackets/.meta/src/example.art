; sourced from https://exercism.org/tracks/arturo/exercises/matching-brackets/solutions/factor3

paired?: $[str][
    if empty? str -> return true
    stack: []
    loop join match str {/[[\]{}()]/} 'ch [
        switch ch ∈ "([{" [
            'stack ++ ch
        ][
            if or? [empty? stack] [¬(sub do to [:integer] @[pop 'stack ch]) ∈ [1 2]] -> return false
        ]
    ]
    empty? stack
]